
@if (todos.length) {
  <div class="card table-container" [class.loading-overlay]="isLoading">
    <div class="table-responsive">
      <table class="todos-table">
        <thead>
          <tr>
            @for (item of columnNames; track $index) {
              <th>{{item}}</th>
            }
          </tr>
        </thead>
        <tbody>
          @for (todo of todos; track $index) {
          <tr [class.completed-row]="todo.completed">
            <td class="text-center">
              <span class="chip chip-sm chip-secondary">{{todo.id}}</span>
            </td>
            <td [class.completed]="todo.completed">
              <div class="todo-text">{{todo.todo}}</div>
            </td>
            <td class="text-center">
              <span [class]="todo.completed ? 'chip chip-success' : 'chip chip-warning'">
                <i [class]="todo.completed ? 'fas fa-check' : 'fas fa-clock'"></i>
                {{todo.completed ? 'Completed' : 'Pending'}}
              </span>
            </td>
            <td class="text-center">
              <div class="action-buttons d-flex gap-2 justify-content-center">
                <button 
                  class="btn btn-sm"
                  [class.btn-outline-success]="!todo.completed"
                  [class.btn-outline-secondary]="todo.completed"
                  (click)="completeTodo(todo)"
                  [disabled]="isLoading"
                  [title]="todo.completed ? 'Mark as Pending' : 'Mark as Complete'">
                  @if (isLoading) {
                    <i class="fas fa-spinner fa-spin"></i>
                  } @else {
                    <i [class]="todo.completed ? 'fas fa-undo' : 'fas fa-check'"></i>
                  }
                </button>
                
                <button 
                  class="btn btn-sm btn-outline-danger" 
                  (click)="deleteTodo(todo)"
                  [disabled]="isLoading"
                  title="Delete Todo">
                  @if (isLoading) {
                    <i class="fas fa-spinner fa-spin"></i>
                  } @else {
                    <i class="fas fa-trash"></i>
                  }
                </button>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- No data message -->
    @if (todos.length === 0) {
      <div class="no-data text-center p-5">
        <i class="fas fa-clipboard-list text-muted mb-3" style="font-size: 3rem;"></i>
        <h4 class="text-muted">No todos found</h4>
        <p class="text-muted">Add your first todo to get started!</p>
      </div>
    }
  </div>
}