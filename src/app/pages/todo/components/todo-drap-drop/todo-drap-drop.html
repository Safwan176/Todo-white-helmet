<div class="todo-drag-drop-container">

  <!-- Todo lists container -->
   @if (true) {
       <div  class="todo-board">
         <!-- Pending Todos Column -->
         <div class="todo-column pending-column">
           <div class="column-header">
             <div class="header-content">
               <i class="fas fa-clock header-icon"></i>
               <h3>Pending</h3>
               <span class="todo-count">{{ getPendingTodos.length }}</span>
             </div>
           </div>
           
           <div 
             cdkDropList
             #pendingList="cdkDropList"
             [cdkDropListData]="getPendingTodos"
             [cdkDropListConnectedTo]="[completedList]"
             class="todo-list pending-list"
             (cdkDropListDropped)="drop($event)">
             
             @for (todo of getPendingTodos; track todo.id) {
              <div 
                cdkDrag 
                class="todo-item pending-item"
                [class.cdk-drag-animating]="true">
                
                <div class="todo-card">
                  <div class="card-header">
                    <div class="todo-title">{{ todo.todo }}</div>
                    <div cdkDragHandle class="drag-handle" title="Drag to move">
                      <i class="fas fa-grip-vertical"></i>
                    </div>
                  </div>
                  
                  
                  <div class="todo-footer">
                    <div class="todo-meta">
                      <span class="todo-priority priority-medium">
                        <i class="fas fa-flag"></i>
                        Medium
                      </span>
                    </div>
                    <div class="todo-actions">
                      <button class="btn btn-sm btn-outline-success" (click)="markAsComplete(todo)" title="Mark as complete">
                        <i class="fas fa-check"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" (click)="deleteTodo(todo)" title="Delete todo">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Drag preview -->
                <div *cdkDragPreview class="drag-preview">
                  <div class="preview-card">
                    <div class="preview-title">{{ todo.todo }}</div>
                    <div class="preview-badge">Moving...</div>
                  </div>
                </div>
              </div>
             } @empty {
              <!-- Empty state for pending -->
              <div class="empty-state">
                <div class="empty-content">
                  <i class="fas fa-tasks empty-icon"></i>
                  <h4>No pending todos</h4>
                  <p>All caught up! Add a new todo to get started.</p>
                </div>
              </div>
             }
           </div>
         </div>
     
         <!-- Divider -->
         <div class="column-divider"></div>
     
         <!-- Completed Todos Column -->
         <div class="todo-column completed-column">
           <div class="column-header">
             <div class="header-content">
               <i class="fas fa-check-circle header-icon"></i>
               <h3>Completed</h3>
               <span class="todo-count">{{ getCompletedTodos.length }}</span>
             </div>
           </div>
           
           <div 
             cdkDropList
             #completedList="cdkDropList"
             [cdkDropListData]="getCompletedTodos"
             [cdkDropListConnectedTo]="[pendingList]"
             class="todo-list completed-list"
             (cdkDropListDropped)="drop($event)">
             
             @for (todo of getCompletedTodos; track todo.id) {
              <div 
                cdkDrag 
                class="todo-item completed-item"
                [class.cdk-drag-animating]="true">
                
                <div class="todo-card completed-card">
                  <div class="card-header">
                    <div class="todo-title completed-title">{{ todo.todo }}</div>
                    <div cdkDragHandle class="drag-handle" title="Drag to move">
                      <i class="fas fa-grip-vertical"></i>
                    </div>
                  </div>
                  
                  
                  <div class="todo-footer">
                    <div class="todo-meta">
                      <span class="todo-completed-status">
                        <i class="fas fa-check-circle"></i>
                        Completed
                      </span>
                    </div>
                    <div class="todo-actions">
                      <button class="btn btn-sm btn-outline-danger" (click)="deleteTodo(todo)" title="Delete todo">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                </div>
                
                <!-- Drag preview -->
                <div *cdkDragPreview class="drag-preview">
                  <div class="preview-card completed-preview">
                    <div class="preview-title">{{ todo.todo }}</div>
                    <div class="preview-badge">Moving...</div>
                  </div>
                </div>
              </div>
             } @empty {
              <!-- Empty state for completed -->
              <div class="empty-state">
                <div class="empty-content">
                  <i class="fas fa-trophy empty-icon"></i>
                  <h4>No completed todos</h4>
                  <p>Complete some todos to see them here.</p>
                </div>
              </div>
             }
           </div>
         </div>
       </div>
   }
</div>